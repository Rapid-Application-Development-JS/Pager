!function(e,t){"function"==typeof define&&define.amd?define(function(){return e.Pager=t()}):"object"==typeof module&&module.exports?module.exports=e.Pager=t():e.Pager=t()}(this,function(){"use strict";function e(e){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var i,n=["ms","moz","webkit","o"],a=document.createElement("div"),s=e.toLowerCase(),r=[];for(i=0;i<n.length;i+=1)r.push(n[i]+t(e));for(i=0;i<r.length;i+=1)if(void 0!==a.style[r[i]]){s="-"+n[i]+"-"+e;break}return s}function t(e,t,i){function n(){return{element:document.createElement("div"),index:null,handler:{}}}function a(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var s,r;for(this._el=e,this._adapter=t,this._wrapper=document.createElement("div"),this._pageHandlers=[n(),n(),n()],this._options=a({preventMove:!0,resizeEvent:!0,onSwipeEnd:function(){}},i),this._enabled=!0,this._gestureKind=null,this._wrapper.appendChild(this._pageHandlers[0].element),this._wrapper.appendChild(this._pageHandlers[1].element),this._wrapper.appendChild(this._pageHandlers[2].element),this._el.appendChild(this._wrapper),this._applyStyles(),r=0;3>r;r+=1)this._pageHandlers[r].element.innerHTML="";for(r=0;r<this._adapter.getPageCount()&&3>r;r+=1)this._changePagePosition(r,r),this._adapter.setPageContent(r,this._pageHandlers[r].element,this._pageHandlers[r].handler);this._adapter.getPageCount()>0&&this._options.onSwipeEnd(0);for(s in this.TRACKING_EVENTS)this.TRACKING_EVENTS.hasOwnProperty(s)&&this._el.addEventListener(this.TRACKING_EVENTS[s],this,!1);this._options.resizeEvent&&window.addEventListener("resize",this,!1),this.destroy=function(){var e;for(e in this.TRACKING_EVENTS)this.TRACKING_EVENTS.hasOwnProperty(e)&&this._el.removeEventListener(this.TRACKING_EVENTS[e],this);window.removeEventListener("resize",this),this._el=null,this._adapter=null,this._wrapper=null,this._pageHandlers=null}}var i;return window.performance=window.performance||{},window.performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}(),function(){var e,t,i,n,a=0,s=["ms","moz","webkit","o"];for(e=0;e<s.length&&!window.requestAnimationFrame;e+=1)window.requestAnimationFrame=window[s[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[e]+"CancelAnimationFrame"]||window[s[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){return t=window.performance.now(),i=Math.max(0,16-(t-a)),n=window.setTimeout(function(){e(t+i)},i),a=t+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),t.prototype={TRACKING_EVENTS:{up:"pointerup",move:"pointermove",down:"pointerdown",chancel:"pointercancel",fling:"fling"},preventDefaultTags:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/,_transformName:e("transform"),_transitionName:e("transition"),_transitionEndName:e("transitionEnd")||"transitionend",_applyStyles:function(){function e(e){e.style.position="absolute",e.style.margin=0,e.style.padding=0,e.style.width="100%",e.style.height="100%",e.style.top=0,e.style.left=0}var t=["fixed","relative","absolute"],i=t.indexOf(window.getComputedStyle(this._el,null).position);this._el.style.position=-1===i?"relative":t[i],this._el.style.overflow="hidden",e(this._wrapper),e(this._pageHandlers[0].element),e(this._pageHandlers[1].element),e(this._pageHandlers[2].element),"string"==typeof this._options.pageClass&&(this._pageHandlers[0].element.className=this._options.pageClass,this._pageHandlers[1].element.className=this._options.pageClass,this._pageHandlers[2].element.className=this._options.pageClass),this._wrapperPosition=0,this._wrapperWidth=this._wrapper.offsetWidth,this.currentPage=0,this._currentShiftForRaf=0},_pointerDown:function(e){var t=this;this._onTheCSSEnd&&this._onTheCSSEnd(),clearTimeout(this._tweatID),window.cancelAnimationFrame(this._RafID),this._lastX=e.originalEvent?e.originalEvent.clientX:e.clientX,this._startY=e.originalEvent?e.originalEvent.clientY:e.clientY,this._animationStep=function(){t._inAnimation&&(t._RafID=window.requestAnimationFrame(t._animationStep)),t._enabled&&t._changeWrapperPosition(t._currentShiftForRaf),t._currentShiftForRaf=0},this._gestureKind=null,this._currentShiftForRaf=0},_pointerMove:function(e){var t=e.originalEvent?e.originalEvent.clientX:e.clientX,i=e.originalEvent?e.originalEvent.clientY:e.clientY;this._currentShiftForRaf+=t-this._lastX,this._lastX=t,null===this._gestureKind&&(Math.abs(this._currentShiftForRaf)>Math.abs(i-this._startY)/2?(this._inAnimation=!0,this._RafID=window.requestAnimationFrame(this._animationStep),this._gestureKind="horizontal"):this._gestureKind="vertical")},_pointerUp:function(){var e=this;this._gestureKind=null,this._tweatID=setTimeout(function(){e.swipeTo()},100)},_pointerFling:function(e){var t=e.originalEvent||e,i=Math.abs(t.speedX)>Math.abs(t.speedY),n=t.speedX<0?"left":"right";i&&Math.abs(t.speedX)>.2&&this._enabled&&(clearTimeout(this._tweatID),this.swipeTo(n))},_changePagePosition:function(e,t){this._pageHandlers[e].element.style.left=100*t+"%",this._pageHandlers[e].index=t},_changeWrapperPosition:function(e){var t=this._wrapperPosition+e;this._adapter.getPageCount()<1||(this._wrapper.style[this._transformName]="translate3d("+t+"px, 0, 0)",this._wrapperPosition=t)},_replacePage:function(e){var t,i=this._wrapperPosition%this._wrapperWidth,n=this._adapter.getPageCount(),a=Math.min((i-this._wrapperPosition)/this._wrapperWidth,n),s=-1,r=-1,o=-1,h=o;for(t=0;n>t&&3>t;t+=1)this._pageHandlers[t].index>r&&(r=this._pageHandlers[t].index,h=t,-1===s&&(s=r,o=h)),this._pageHandlers[t].index<s&&(s=this._pageHandlers[t].index,o=t);e>0&&n-1>a&&a===r&&(this._changePagePosition(o,a+1),this._adapter.setPageContent(a+1,this._pageHandlers[o].element,this._pageHandlers[o].handler)),0>e&&a>0&&a===s&&(this._changePagePosition(h,a-1),this._adapter.setPageContent(a-1,this._pageHandlers[h].element,this._pageHandlers[h].handler)),this.currentPage=a},handleEvent:function(e){var t=this;switch(e.type){case this.TRACKING_EVENTS.down:this._pointerDown(e);break;case this.TRACKING_EVENTS.move:this._pointerMove(e),"horizontal"===this._gestureKind&&this._options.preventMove&&!this.preventDefaultTags.test(e.target)&&e.preventDefault();break;case this.TRACKING_EVENTS.chancel:case this.TRACKING_EVENTS.up:this._pointerUp(e);break;case this.TRACKING_EVENTS.fling:this._pointerFling(e);break;case"resize":clearTimeout(this._resizeID),this._resizeID=setTimeout(function(){t.refresh()},150)}},swipeTo:function(e){var t,i=this,n=this._wrapperPosition%this._wrapperWidth,a=this._adapter.getPageCount(),s=Math.min((n-this._wrapperPosition)/this._wrapperWidth,a),r=-1,o=-1,h=-1,p=h;for(window.cancelAnimationFrame(this._RafID),this._inAnimation=!1,t=0;a>t&&3>t;t+=1)this._pageHandlers[t].index>o&&(o=this._pageHandlers[t].index,p=t,-1===r&&(r=o,h=p)),this._pageHandlers[t].index<r&&(r=this._pageHandlers[t].index,h=t);0===s&&("right"===e||n>0&&Math.abs(n)>this._wrapperWidth/2)?(e="left",n=this._wrapperPosition-this._wrapperWidth):s===a-1&&("left"===e||Math.abs(n)>this._wrapperWidth/2)&&(e="right",n=n-this._wrapperWidth+this._wrapperWidth),"left"===e||void 0===e&&Math.abs(n)>this._wrapperWidth/2?n=-(this._wrapperWidth+n):("right"===e||void 0===e&&Math.abs(n)<this._wrapperWidth/2)&&(n=-n),this._wrapper.style[this._transitionName]="all "+350*Math.abs(n)/this._wrapperWidth+"ms ease-in-out",this._onTheCSSEnd=function(){i._wrapper.removeEventListener(i._transitionEndName,i._onTheCSSEnd),i._wrapper.style[i._transitionName]="none",i._replacePage(-n),i._onTheCSSEnd=null,i._options.onSwipeEnd(i.currentPage)},this._wrapper.addEventListener(this._transitionEndName,this._onTheCSSEnd,!1),this._changeWrapperPosition(n)},refresh:function(){this._onTheCSSEnd&&this._onTheCSSEnd(),clearTimeout(this._tweatID),window.cancelAnimationFrame(this._RafID),this._wrapperWidth=this._wrapper.offsetWidth,this._currentShiftForRaf=0,this.gotoPage(this.currentPage)},gotoPage:function(e){var t,i,n,a,s,r,o,h,p=this._adapter.getPageCount();if(0===p){for(a=0;3>a;a+=1)s=this._pageHandlers[a],s.element.innerHTML="",s.index=null,s.handler={};return void this._options.onSwipeEnd(0/0)}for(0>e?(i=0,t=p>i+1?i+1:null,n=p>t+1?t+1:null):e>p-1?(n=p-1,t=n-1>-1?n-1:null,i=t-1>-1?t-1:null):(t=e,i=t-1>-1?t-1:p>2?t+2:null,n=p>t+1?t+1:t-2>-1?t-2:null),r=[i,t,n],a=0;3>a;a+=1)o=r[a],s=this._pageHandlers[a],null===o?(s.element.innerHTML="",s.index=null,s.handler={}):(s.index=o,this._changePagePosition(a,o),this._adapter.setPageContent(o,s.element,s.handler));h=-(t*this._wrapperWidth),this._wrapper.style[this._transformName]="translate3d("+h+"px, 0, 0)",this._wrapperPosition=h,this._options.onSwipeEnd(t)},enable:function(e){this._enabled=e}},"undefined"!=typeof exports&&(exports.module=t),i=new t,i.Constructor=t,i});
//# sourceMappingURL=pager.map